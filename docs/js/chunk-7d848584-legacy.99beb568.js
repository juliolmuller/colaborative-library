(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d848584"],{"02b3":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"book-details"}},[r("header",[r("ViewTitle",[t._v(" "+t._s(t._f("truncate")("novo"===t.bookId?"Novo Livro":t.book.name,80))+" ")]),t.isEditing?t._e():r("button",{staticClass:"btn btn-sm btn-light",attrs:{type:"button"},on:{click:function(e){return t.$router.go(-1)}}},[r("img",{attrs:{src:n("c012"),alt:"ícone de retornar"}}),t._v(" Voltar ")])],1),r("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-md-4"},[r("img",{staticClass:"img-fluid",attrs:{alt:"Capa do livro",src:t.book.image},on:{error:t.fallbackImage}})]),r("div",{staticClass:"col-12 col-md-8"},["novo"!==t.bookId?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"book-id"}},[t._v("Código de Cadastro:")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.book.id,expression:"book.id",modifiers:{number:!0}}],class:t.inputStyle,attrs:{type:"text",id:"book-id",readonly:""},domProps:{value:t.book.id},on:{input:function(e){e.target.composing||t.$set(t.book,"id",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):t._e(),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"book-name"}},[t._v("Título da Obra:")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.book.name,expression:"book.name",modifiers:{trim:!0}}],class:t.inputStyle,attrs:{type:"text",id:"book-name",readonly:!t.isEditing,required:"",autofocus:""},domProps:{value:t.book.name},on:{input:function(e){e.target.composing||t.$set(t.book,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.isEditing?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"book-image"}},[t._v("URL da Capa:")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.book.image,expression:"book.image",modifiers:{trim:!0}}],class:t.inputStyle,attrs:{type:"text",id:"book-image",readonly:!t.isEditing,required:""},domProps:{value:t.book.image},on:{input:function(e){e.target.composing||t.$set(t.book,"image",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]):t._e(),t.isEditing?t._e():r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"book-owner"}},[t._v("Dono do Livro:")]),r("input",{class:t.inputStyle,attrs:{type:"text",id:"book-owner",readonly:""},domProps:{value:t.owner.name}})]),t.isEditing?t._e():r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"status"}},[t._v("Status:")]),r("input",{class:Object.assign({},t.inputStyle,{"text-hero":!1,"text-success":!t.book.loan,"text-danger":!!t.book.loan}),attrs:{type:"text",id:"status",readonly:""},domProps:{value:t.book.loan?"Emprestado desde "+new Date(t.book.loan.date).toLocaleDateString():"Disponível"}})]),r("div",{staticClass:"action-btn"},[t.isEditing||t.book.loan?t._e():r("button",{staticClass:"btn btn-hero",attrs:{type:"button",disabled:t.isLoading},on:{click:t.handleBorrow}},[t._v("Emprestar Livro")]),!t.isEditing&&t.book.loan&&t.book.loan.userId===t.user.id?r("button",{staticClass:"btn btn-hero",attrs:{type:"button",disabled:t.isLoading},on:{click:t.handleReturn}},[t._v("Devolver Livro")]):t._e(),t.isEditing&&!t.book.loan&&t.owner.id===t.user.id&&"novo"!==t.bookId?r("button",{staticClass:"btn btn-danger mr-auto",attrs:{type:"button",disabled:t.isLoading},on:{click:t.handleDelete}},[t._v("Remover da Estante")]):t._e(),t.book.loan||t.owner.id!==t.user.id||"novo"===t.bookId?t._e():r("button",{class:["btn",t.isEditing?"btn-light":"btn-secondary"],attrs:{type:"button"},on:{click:t.toggleEditing}},[t._v(t._s(t.isEditing?"Cancelar":"Editar Dados"))]),t.isEditing?r("button",{staticClass:"btn btn-hero",attrs:{type:"submit",disabled:t.isLoading}},[t._v("Concluído")]):t._e()])])])])])},o=[],a=(n("7db0"),n("b0c0"),n("a9e3"),n("d3b7"),n("ac1f"),n("5319"),n("96cf"),n("1da1")),i=n("5530"),s=n("2f62"),c=n("ccc1"),u=n("d246"),l=n("1a3b"),d=n.n(l),b={name:"BookDetails",filters:{truncate:c["a"]},components:{ViewTitle:u["a"]},props:{bookId:{type:[Number,String],required:!0}},data:function(){return{isLoading:!1,isEditing:!1,dataBackup:{},book:{}}},computed:Object(i["a"])(Object(i["a"])({},Object(s["c"])({appLoading:"isLoading",books:"books/allBooks",users:"users/allUsers",user:"auth/userData"})),{},{owner:function(){var t=this,e=this.users.find((function(e){return e.id===t.book.userId}))||{},n=this.book.userId===this.user.id;return Object(i["a"])(Object(i["a"])({},e),{},{name:n?"você":e.name})},inputStyle:function(){return{"form-control":this.isEditing,"form-control-plaintext":!this.isEditing,"font-weight-bold":!this.isEditing,"text-hero":!this.isEditing}}}),watch:{book:function(t){this.dataBackup=Object(i["a"])({},t)}},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])("books",{createBook:"create",updateBook:"update",borrowBook:"borrow",returnBook:"return",deleteBook:"delete"})),{},{toggleEditing:function(){this.isEditing=!this.isEditing,this.book=Object(i["a"])({},this.dataBackup)},fallbackImage:function(t){t.target.src=d.a},handleSubmit:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading=!0,e.prev=1,"novo"!==t.bookId){e.next=10;break}return e.next=5,t.createBook(t.book);case 5:t.book=e.sent,t.isEditing=!1,t.$router.replace({name:"BookDetails",params:{bookId:t.book.id}}),e.next=13;break;case 10:return e.next=12,t.updateBook(t.book);case 12:t.isEditing=!1;case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e["catch"](1),e.t0;case 18:return e.prev=18,t.isLoading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})))()},handleBorrow:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.borrowBook(t.book);case 4:t.book=t.books.find((function(e){var n=e.id;return t.bookId===n})),e.next=10;break;case 7:throw e.prev=7,e.t0=e["catch"](1),e.t0;case 10:return e.prev=10,t.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})))()},handleReturn:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.returnBook(t.book);case 4:t.book=t.books.find((function(e){var n=e.id;return t.bookId===n})),e.next=10;break;case 7:throw e.prev=7,e.t0=e["catch"](1),e.t0;case 10:return e.prev=10,t.isLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})))()},handleDelete:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm('Tem certeza de que deseja remover o livro "'.concat(t.book.name,'" do catálogo?'))){e.next=14;break}return t.isLoading=!0,e.prev=2,e.next=5,t.deleteBook(t.book);case 5:t.$router.replace({name:"Home"}),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](2),e.t0;case 11:return e.prev=11,t.isLoading=!0,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})))()}}),mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){while(t.appLoading);e()}));case 2:if("novo"!==t.bookId){e.next=8;break}return t.book.userId=t.user.id,t.book.image="https://",t.book.loan=!1,t.isEditing=!0,e.abrupt("return");case 8:n=t.books.find((function(e){var n=e.id;return t.bookId===n})),n?t.book=Object(i["a"])({},n):t.$router.replace({name:"Home"});case 10:case"end":return e.stop()}}),e)})))()}},f=b,p=(n("f36d"),n("2877")),v=Object(p["a"])(f,r,o,!1,null,null,null);e["default"]=v.exports},"0a25":function(t,e,n){"use strict";n("af4b")},"0cb2":function(t,e,n){var r=n("7b0b"),o=Math.floor,a="".replace,i=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,n,c,u,l){var d=n+t.length,b=c.length,f=s;return void 0!==u&&(u=r(u),f=i),a.call(l,f,(function(r,a){var i;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(d);case"<":i=u[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>b){var l=o(s/10);return 0===l?r:l<=b?void 0===c[l-1]?a.charAt(1):c[l-1]+a.charAt(1):r}i=c[s-1]}return void 0===i?"":i}))}},"14c3":function(t,e,n){var r=n("c6b6"),o=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},"1a3b":function(t,e,n){t.exports=n.p+"img/fallback-image.be641a8a.jpg"},5319:function(t,e,n){"use strict";var r=n("d784"),o=n("825a"),a=n("50c4"),i=n("a691"),s=n("1d80"),c=n("8aa5"),u=n("0cb2"),l=n("14c3"),d=Math.max,b=Math.min,f=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(n,r){var o=s(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,o,r):e.call(String(o),n,r)},function(t,r){if(!p&&v||"string"===typeof r&&-1===r.indexOf(g)){var s=n(e,t,this,r);if(s.done)return s.value}var m=o(t),h=String(this),k="function"===typeof r;k||(r=String(r));var x=m.global;if(x){var E=m.unicode;m.lastIndex=0}var w=[];while(1){var _=l(m,h);if(null===_)break;if(w.push(_),!x)break;var y=String(_[0]);""===y&&(m.lastIndex=c(h,a(m.lastIndex),E))}for(var R="",I=0,C=0;C<w.length;C++){_=w[C];for(var S=String(_[0]),O=d(b(i(_.index),h.length),0),$=[],L=1;L<_.length;L++)$.push(f(_[L]));var j=_.groups;if(k){var B=[S].concat($,O,h);void 0!==j&&B.push(j);var P=String(r.apply(void 0,B))}else P=u(S,h,O,$,j,r);O>=I&&(R+=h.slice(I,O)+P,I=O+S.length)}return R+h.slice(I)}]}))},6547:function(t,e,n){var r=n("a691"),o=n("1d80"),a=function(t){return function(e,n){var a,i,s=String(o(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(a=s.charCodeAt(c),a<55296||a>56319||c+1===u||(i=s.charCodeAt(c+1))<56320||i>57343?t?s.charAt(c):a:t?s.slice(c,c+2):i-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9263:function(t,e,n){"use strict";var r=n("ad6d"),o=n("9f7f"),a=RegExp.prototype.exec,i=String.prototype.replace,s=a,c=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=o.UNSUPPORTED_Y||o.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],d=c||l||u;d&&(s=function(t){var e,n,o,s,d=this,b=u&&d.sticky,f=r.call(d),p=d.source,v=0,g=t;return b&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),g=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,v++),n=new RegExp("^(?:"+p+")",f)),l&&(n=new RegExp("^"+p+"$(?!\\s)",f)),c&&(e=d.lastIndex),o=a.call(b?n:d,g),b?o?(o.input=o.input.slice(v),o[0]=o[0].slice(v),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:c&&o&&(d.lastIndex=d.global?o.index+o[0].length:e),l&&o&&o.length>1&&i.call(o[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)})),o}),t.exports=s},"9f7f":function(t,e,n){"use strict";var r=n("d039");function o(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,n){"use strict";var r=n("23e7"),o=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},af4b:function(t,e,n){},c012:function(t,e,n){t.exports=n.p+"img/left-arrow.4dde86d2.svg"},ccc1:function(t,e,n){"use strict";n("fb6a");var r=60,o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";if(!t||"string"!==typeof t)return t;if(t.length<=e)return t;var o=e-n.length,a=t.slice(0,o),i=a.length-1;while(i>0&&" "!==a[i]&&a[i]!==n[0])i--;return i=i||o,a=a.slice(0,i),a+n};e["a"]=o},d246:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"h1",attrs:{id:"view-title"}},[t._t("default")],2)},o=[],a={name:"ViewTitle"},i=a,s=(n("0a25"),n("2877")),c=Object(s["a"])(i,r,o,!1,null,null,null);e["a"]=c.exports},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),o=n("d039"),a=n("b622"),i=n("9263"),s=n("9112"),c=a("species"),u=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),b=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var p=a(t),v=!o((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),g=v&&!o((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!v||!g||"replace"===t&&(!u||!l||b)||"split"===t&&!f){var m=/./[p],h=n(p,""[t],(function(t,e,n,r,o){return e.exec===i?v&&!o?{done:!0,value:m.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:b}),k=h[0],x=h[1];r(String.prototype,t,k),r(RegExp.prototype,p,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}d&&s(RegExp.prototype[p],"sham",!0)}},dcf9:function(t,e,n){},f36d:function(t,e,n){"use strict";n("dcf9")}}]);
//# sourceMappingURL=chunk-7d848584-legacy.99beb568.js.map